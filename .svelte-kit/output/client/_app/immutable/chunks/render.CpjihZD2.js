import{e as k,H as A,a as w,s as g,b as H,h as L,c as b,d as I,i as O,f as M,g as T,j as P,P as Y}from"./disclose-version.DLFa3qtk.js";import{f as j,i as C,h as N,j as V,k as $,l as q,m as B,p as W,n as z,o as F,c as G}from"./runtime.DgzI6-Hr.js";import{h as J}from"./warnings.C6eb7gPK.js";const K=new Set,D=new Set;function m(a){var R;var r=this,o=r.ownerDocument,u=a.type,e=((R=a.composedPath)==null?void 0:R.call(a))||[],t=e[0]||a.target,v=0,c=a.__root;if(c){var f=e.indexOf(c);if(f!==-1&&(r===document||r===window)){a.__root=r;return}var d=e.indexOf(r);if(d===-1)return;f<=d&&(v=f)}if(t=e[v]||a.target,t!==r){j(a,"currentTarget",{configurable:!0,get(){return t||o}});try{for(var l,n=[];t!==null;){var i=t.parentNode||t.host||null;try{var s=t["__"+u];if(s!==void 0&&!t.disabled)if(C(s)){var[_,...y]=s;_.apply(t,[a,...y])}else s.call(t,a)}catch(p){l?n.push(p):l=p}if(a.cancelBubble||i===r||i===null)break;t=i}if(l){for(let p of n)queueMicrotask(()=>{throw p});throw l}}finally{a.__root=r,t=r}}}function x(a,r){(a.__t??(a.__t=a.nodeValue))!==r&&(a.nodeValue=a.__t=r)}function Q(a,r){const o=r.anchor??r.target.appendChild(k());return N(()=>S(a,{...r,anchor:o}),!1)}function rr(a,r){r.intro=r.intro??!1;const o=r.target,u=T;try{return N(()=>{for(var e=o.firstChild;e&&(e.nodeType!==8||e.data!==A);)e=e.nextSibling;if(!e)throw w;g(!0),H(e),L();const t=S(a,{...r,anchor:e});if(b.nodeType!==8||b.data!==I)throw J(),w;return g(!1),t},!1)}catch(e){if(e===w)return r.recover===!1&&V(),O(),M(o),g(!1),Q(a,r);throw e}finally{g(u)}}const h=new Map;function S(a,{target:r,anchor:o,props:u={},events:e,context:t,intro:v=!0}){O();var c=new Set,f=n=>{for(var i=0;i<n.length;i++){var s=n[i];if(!c.has(s)){c.add(s);var _=Y.includes(s);r.addEventListener(s,m,{passive:_});var y=h.get(s);y===void 0?(document.addEventListener(s,m,{passive:_}),h.set(s,1)):h.set(s,y+1)}}};f($(K)),D.add(f);var d=void 0,l=q(()=>(B(()=>{if(t){W({});var n=G;n.c=t}e&&(u.$$events=e),T&&P(o,null),d=a(o,u)||{},T&&(z.nodes.end=b),t&&F()}),()=>{for(var n of c){r.removeEventListener(n,m);var i=h.get(n);--i===0?(document.removeEventListener(n,m),h.delete(n)):h.set(n,i)}D.delete(f),E.delete(d)}));return E.set(d,l),d}let E=new WeakMap;function ar(a){const r=E.get(a);r==null||r()}export{rr as h,Q as m,x as s,ar as u};
